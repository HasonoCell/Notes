
### NPM çš„å¹½çµä¾èµ–é—®é¢˜
#### æ ¸å¿ƒå®šä¹‰
**å¹½çµä¾èµ–**ï¼Œä¹Ÿå¸¸è¢«ç§°ä¸º**å¹»å½±ä¾èµ–**ï¼ŒæŒ‡çš„æ˜¯åœ¨ä¸€ä¸ª npm åŒ…é¡¹ç›®ä¸­ï¼Œä½ çš„ä»£ç ç›´æ¥å¼•ç”¨äº†æŸä¸ªå¹¶æœªåœ¨ä½ é¡¹ç›®çš„ `package.json` æ–‡ä»¶çš„ `dependencies`ï¼ˆæˆ– `devDependencies`ï¼‰å­—æ®µä¸­å£°æ˜çš„åŒ…ã€‚

æ¢å¥è¯è¯´ï¼Œä½ ä½¿ç”¨äº†ä¸€ä¸ªåº“ï¼ˆä¾‹å¦‚ `lodash`ï¼‰ï¼Œä½†è¿™ä¸ªåº“å¹¶ä¸æ˜¯ä½ äº²è‡ªå®‰è£…çš„ï¼Œè€Œæ˜¯ä½œä¸º**å¦ä¸€ä¸ªä½ æ˜ç¡®å®‰è£…çš„ä¾èµ–åŒ…çš„ä¾èµ–**ï¼Œè¢«é—´æ¥åœ°å®‰è£…åˆ°äº†ä½ çš„ `node_modules` ç›®å½•é‡Œã€‚

#### é—®é¢˜æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ
è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»äº†è§£ npm çš„ **node_modules æ‰å¹³åŒ–ç»“æ„**ï¼ˆåœ¨ npm v3 åŠä¹‹åç‰ˆæœ¬ï¼‰ã€‚

1. **åµŒå¥—ç»“æ„ï¼ˆnpm v2ï¼‰**ï¼šæ—©æœŸï¼Œ`node_modules` æ˜¯ä¸¥æ ¼åµŒå¥—çš„ã€‚æ¯ä¸ªåŒ…çš„ä¾èµ–éƒ½åœ¨å…¶è‡ªèº«çš„ `node_modules` æ–‡ä»¶å¤¹å†…ã€‚è¿™æ ·ä¸ä¼šå‡ºç°å¹½çµä¾èµ–ï¼Œå› ä¸ºä½ çš„ä»£ç æ ¹æœ¬æ— æ³•è®¿é—®åˆ°é‚£äº›åµŒå¥—å¾ˆæ·±çš„ã€ä¸å±äºä½ çš„ç›´æ¥ä¾èµ–ã€‚
2. **æ‰å¹³åŒ–ç»“æ„ï¼ˆnpm v3+ï¼‰**ï¼šä¸ºäº†è§£å†³åµŒå¥—è¿‡æ·±å’Œè·¯å¾„è¿‡é•¿çš„é—®é¢˜ï¼Œnpm v3 å¼•å…¥äº†æ‰å¹³åŒ–ç®—æ³•ã€‚å®ƒä¼šå°†ä¾èµ–å°½å¯èƒ½åœ°æå‡ï¼ˆhoistï¼‰åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `node_modules` ä¸­ã€‚

**æ­£æ˜¯è¿™ä¸ªâ€œæå‡â€æ“ä½œï¼Œåˆ›é€ äº†å¹½çµä¾èµ–çš„æ¸©åºŠã€‚**

#### ä¸€ä¸ªå…·ä½“çš„ä¾‹å­
å‡è®¾ä½ çš„é¡¹ç›® `my-app` åªå®‰è£…äº†ä¸€ä¸ªä¾èµ–åŒ… `awesome-package`ã€‚

1. ä½ çš„`package.json`:

```json
{
  "name": "my-app",
  "dependencies": {
    "awesome-package": "^1.0.0"
  }
}
```

è€Œ `awesome-package` è‡ªèº«åˆä¾èµ–äº† `lodash@^4.17.0`ã€‚

2. å®‰è£…åçš„ç»“æ„ï¼š  
å½“ä½ è¿è¡Œ `npm install` åï¼Œnpm çš„å®‰è£…ç®—æ³•ä¼šå°è¯•è¿›è¡Œæ‰å¹³åŒ–ã€‚æœ€ç»ˆï¼Œä½ çš„ `node_modules` ç›®å½•ç»“æ„å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```json
node_modules/
â”œâ”€â”€ awesome-package/    # ä½ æ˜ç¡®å®‰è£…çš„åŒ…
â””â”€â”€ lodash/            # è¢« hoist ä¸Šæ¥çš„ `awesome-package` çš„ä¾èµ–ï¼ˆv4.17.21ï¼‰
```

`lodash` è¢«æå‡åˆ°äº†ä¸ `awesome-package` åŒçº§çš„ä½ç½®ã€‚

3. å¹½çµä¾èµ–å‡ºç°ï¼š  
ç°åœ¨ï¼Œåœ¨ä½ çš„é¡¹ç›®ä»£ç ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥è¿™æ ·å†™ï¼š

```javascript
// index.js
const _ = require('lodash'); // æˆ–è€… import _ from 'lodash';
const awesome = require('awesome-package');

_.map(...); // ä½¿ç”¨ lodash
```

è¿™æ®µä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œï¼ å› ä¸º Node.js çš„æ¨¡å—è§£ææœºåˆ¶ä¼šæ²¿ç€è·¯å¾„å‘ä¸ŠæŸ¥æ‰¾ `node_modules`ï¼Œå®ƒåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `node_modules` é‡Œæ‰¾åˆ°äº† `lodash`ã€‚ç„¶è€Œï¼Œ`lodash`** å¹¶æ²¡æœ‰å‡ºç°åœ¨ä½ çš„ **`package.json`** ä¸­**ã€‚å®ƒæˆäº†ä¸€ä¸ªâ€œå¹½çµâ€ä¾èµ–ã€‚

#### å¹½çµä¾èµ–å¸¦æ¥çš„å±å®³
è¿™ä¸ªé—®é¢˜éå¸¸éšè”½ä¸”å±å®³å·¨å¤§ï¼Œæ˜¯ä¾èµ–ç®¡ç†çš„é‡å¤§éšæ‚£ã€‚

1. ä¾èµ–ä¸ç¡®å®šæ€§ï¼ˆç‰ˆæœ¬å†²çªï¼‰ï¼š  
è¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜ã€‚å‡è®¾åæ¥ä½ åˆå®‰è£…äº†ä¸€ä¸ªæ–°çš„ç›´æ¥ä¾èµ– `another-package`ï¼Œè€Œ `another-package` ä¾èµ–äº† `lodash@^3.0.0`ã€‚npm åœ¨å®‰è£…æ—¶ä¼šå°è¯•æ»¡è¶³æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬ã€‚ç”±äºé¡¹ç›®æ ¹ç›®å½•çš„ `node_modules` åªèƒ½å­˜åœ¨ä¸€ä¸ªç‰ˆæœ¬çš„ `lodash`ï¼Œå‡è®¾è¿™æ¬¡å®ƒå†³å®šæå‡ `lodash@3.0.0`ï¼Œè€Œå°† `lodash@4.x` åµŒå¥—åœ¨ `awesome-package` çš„ `node_modules` é‡Œã€‚æ–°çš„ç»“æ„å¯èƒ½æ˜¯ï¼š

```json
node_modules/
â”œâ”€â”€ awesome-package/
â”‚   â””â”€â”€ node_modules/
â”‚       â””â”€â”€ lodash/    # v4.17.21ï¼Œè¢«é™çº§åµŒå¥—äº†
â”œâ”€â”€ another-package/
â””â”€â”€ lodash/            # v3.0.0ï¼Œè¢«æå‡åˆ°äº†é¡¶éƒ¨
```

æ­¤æ—¶ï¼Œä½ çš„ä»£ç  `require('lodash')` ä¼šæ‰¾åˆ°é¡¶éƒ¨çš„ `v3.0.0`ï¼Œè€Œ `awesome-package` å†…éƒ¨ä¼šä½¿ç”¨å®ƒè‡ªå·±ç›®å½•ä¸‹çš„ `v4.17.21`ã€‚è¿™ä¼šå¯¼è‡´ä½ çš„åº”ç”¨ç¨‹åºçªç„¶å´©æºƒï¼Œå› ä¸ºä½ çš„ä»£ç æ˜¯ä¸º `lodash v4` çš„ API ç¼–å†™çš„ï¼Œä½†ç°åœ¨å´è¿è¡Œåœ¨ `v3` ä¸Šã€‚é—®é¢˜éš¾ä»¥æ’æŸ¥ï¼Œå› ä¸ºä½ çš„ `package.json` çœ‹èµ·æ¥æ¯«æ— å˜åŒ–ã€‚

2. ä¾èµ–ç¼ºå¤±ï¼ˆè‡´å‘½é—®é¢˜ï¼‰ï¼š  
å‡è®¾ `awesome-package` åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­ç§»é™¤äº†å¯¹ `lodash` çš„ä¾èµ–ï¼Œæˆ–è€…æ”¹ç”¨å…¶ä»–å·¥å…·äº†ã€‚  
å½“ä½ æ›´æ–° `awesome-package` åï¼Œç”±äºä½ çš„é¡¹ç›®å¹¶ä¸ç›´æ¥ä¾èµ– `lodash`ï¼Œnpm ä¼šæ¯«ä¸çŠ¹è±«åœ°å°† `lodash` ä»ä½ çš„ `node_modules` ä¸­å®Œå…¨ç§»é™¤ã€‚  
è¿™å°†å¯¼è‡´ä½ çš„é¡¹ç›®åœ¨å¯åŠ¨æ—¶ç›´æ¥å´©æºƒï¼ŒæŠ¥é”™ `Cannot find module 'lodash'`ã€‚ä½ ç”šè‡³ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå› ä¸ºä½ çš„ `package.json` é‡Œä»æ¥æ²¡æœ‰è¿‡å®ƒã€‚

#### æ€»ç»“
| æ–¹é¢       | è§£é‡Š                                                                               |
| :------- | :------------------------------------------------------------------------------- |
| **æ˜¯ä»€ä¹ˆ**  | ä»£ç å¼•ç”¨äº†æœªåœ¨ `package.json` ä¸­å£°æ˜çš„ã€ç”±å…¶ä»–ä¾èµ–é—´æ¥å¸¦æ¥çš„åŒ…ã€‚                                         |
| **æ ¹æº**   | npm çš„ `node_modules` æ‰å¹³åŒ–å®‰è£…ç®—æ³•å°†é—´æ¥ä¾èµ–æå‡åˆ°äº†å¯è¢«è®¿é—®çš„é¡¶å±‚ã€‚                                    |
| **å±å®³**   | 1. **ç‰ˆæœ¬å†²çª**å¯¼è‡´éš¾ä»¥è°ƒè¯•çš„è¿è¡Œæ—¶é”™è¯¯ã€‚   2. **ä¾èµ–ç¼ºå¤±**å¯¼è‡´é¡¹ç›®çªç„¶å´©æºƒã€‚   3. **å®‰å…¨ä¸åˆè§„**é£é™©ï¼Œæ¼æ´å’Œè¿è§„è®¸å¯è¯ä¸è¢«å¯Ÿè§‰ã€‚   |
| **è§£å†³æ–¹æ¡ˆ** | 1. ä½¿ç”¨ `depcheck` ç­‰å·¥å…·æ£€æµ‹ã€‚   2. æ¢ç”¨ **pnpm** æˆ– **Yarn PnP** ä»æ ¹æºè§£å†³ã€‚   3. å…»æˆè‰¯å¥½çš„ä¾èµ–ç®¡ç†ä¹ æƒ¯ã€‚ |

### æ›´ç°ä»£çš„åŒ…ç®¡ç†å™¨ï¼šPnpm
PNPMï¼ˆPerformance NPMï¼‰ä»¥å…¶ç‹¬ç‰¹çš„è®¾è®¡å’Œæ€§èƒ½ä¼˜åŠ¿ï¼Œæˆä¸ºç›®å‰å¤‡å—å…³æ³¨çš„åŒ…ç®¡ç†å·¥å…·ã€‚

| ç‰¹æ€§ç»´åº¦ | PNPM çš„ä¼˜åŠ¿ä½“ç° | ä¼ ç»ŸåŒ…ç®¡ç†å™¨ (npm/Yarn) çš„å¯¹æ¯” |
| :--- | :--- | :--- |
| **å®‰è£…é€Ÿåº¦** | åˆ©ç”¨**ç¡¬é“¾æ¥**å’Œ**å…¨å±€å­˜å‚¨**ï¼Œç›¸åŒä¾èµ–è·¨é¡¹ç›®å…±äº«ï¼Œæå¤§å‡å°‘ä¸‹è½½å’Œç£ç›˜å†™å…¥æ“ä½œï¼Œå®‰è£…é€Ÿåº¦é€šå¸¸æ›´å¿«ã€‚ | æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹å®‰è£…ä¾èµ–ï¼Œå³ä½¿ç›¸åŒä¾èµ–ä¹Ÿé‡å¤ä¸‹è½½å’Œå­˜å‚¨ï¼Œé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œå ç”¨æ›´å¤šç£ç›˜ç©ºé—´ã€‚ |
| **ç£ç›˜ç©ºé—´æ•ˆç‡** | **å…¨å±€å­˜å‚¨**ä½¿å¾—åŒä¸€ä¸ªç‰ˆæœ¬çš„ä¾èµ–åœ¨ç£ç›˜ä¸Šåªå­˜åœ¨ä¸€ä»½ï¼Œæ‰€æœ‰é¡¹ç›®é€šè¿‡**ç¡¬é“¾æ¥**å…±äº«ï¼Œæ˜¾è‘—èŠ‚çœç©ºé—´ã€‚ | æ¯ä¸ªé¡¹ç›®çš„ä¾èµ–éƒ½ç‹¬ç«‹å­˜å‚¨ï¼Œå³ä½¿å®Œå…¨ç›¸åŒçš„ä¾èµ–ä¹Ÿä¼šåœ¨ä¸åŒé¡¹ç›®çš„ `node_modules` ä¸­é‡å¤å­˜å‚¨ï¼Œæµªè´¹ç£ç›˜ç©ºé—´ã€‚ |
| **ä¾èµ–ç®¡ç†å®‰å…¨æ€§** | **éå¹³é“ºçš„ **`node_modules`** ç»“æ„**ï¼ˆç¬¦å·é“¾æ¥ï¼‰æœ‰æ•ˆé¿å…äº†**å¹½çµä¾èµ–**ï¼ˆPhantom dependenciesï¼‰é—®é¢˜ã€‚ | **å¹³é“ºçš„ **`node_modules`** ç»“æ„**ï¼ˆä¾èµ–æå‡ï¼‰å¯èƒ½å¯¼è‡´å¯ä»¥è®¿é—®æœªåœ¨`package.json`ä¸­å£°æ˜çš„åŒ…ï¼ˆå¹½çµä¾èµ–ï¼‰ï¼Œå¸¦æ¥æ½œåœ¨é£é™©ã€‚ |
| **Monorepo æ”¯æŒ** | **å†…ç½®å·¥ä½œåŒºï¼ˆWorkspaceï¼‰åŠŸèƒ½**ï¼Œèƒ½é«˜æ•ˆå¤„ç†å•ä»“åº“å¤šåŒ…çš„é¡¹ç›®ç»“æ„ï¼Œä¼˜åŒ–ä¾èµ–ç®¡ç†å’Œé“¾æ¥ã€‚ | éœ€è¦å€ŸåŠ© Lerna ç­‰ç¬¬ä¸‰æ–¹å·¥å…·æ¥å®ç° Monorepoï¼Œé…ç½®å’Œä¾èµ–ç®¡ç†å¯èƒ½æ›´å¤æ‚ã€‚ |


#### ä»€ä¹ˆæ˜¯**ç¡¬é“¾æ¥**ä¸**ç¬¦å·é“¾æ¥ï¼Ÿ**
è®©æˆ‘ä»¬ç”¨â€œæˆ¿å­â€å’Œâ€œåœ°å€â€æ¥è¿›è¡Œæ¯”å–»ï¼š

1. ç¡¬ç›˜ä¸Šçš„ç‰©ç†æ•°æ®ï¼ˆæ–‡ä»¶å†…å®¹ï¼‰ = ä¸€æ ‹çœŸå®çš„æˆ¿å­ï¼Œç¡¬é“¾æ¥ = è¿™æ ‹æˆ¿å­çš„ä¸åŒå¤§é—¨ã€‚
2. æˆ¿å­å¯ä»¥æœ‰å‰é—¨ã€åé—¨ã€ä¾§é—¨ã€‚æ— è®ºä½ ä»å“ªæ‰‡é—¨è¿›å…¥ï¼Œä½ è¿›å…¥çš„éƒ½æ˜¯åŒä¸€æ ‹æˆ¿å­ã€‚
	å°æ‰ä¸€æ‰‡é—¨ï¼ˆåˆ é™¤ä¸€ä¸ªç¡¬é“¾æ¥ï¼‰ï¼Œä½ ä¾ç„¶å¯ä»¥ä»å…¶ä»–é—¨è¿›å…¥ï¼Œæˆ¿å­æœ¬èº«å®Œå¥½æ— æŸã€‚
	åªæœ‰æ‰€æœ‰é—¨éƒ½è¢«å°æ‰åï¼Œè¿™æ ‹æˆ¿å­æ‰å˜å¾—æ— æ³•è®¿é—®ï¼Œå¹¶è¢«æœ€ç»ˆæ‹†é™¤ï¼ˆæ•°æ®è¢«åˆ é™¤ï¼‰ã€‚æ‰€ä»¥ï¼Œç¡¬é“¾æ¥ä¸æ˜¯â€œæŒ‡å‘â€æˆ¿å­çš„æŒ‡é’ˆï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€æ‰‡é€šå¾€æˆ¿å­çš„ã€å®å®åœ¨åœ¨çš„é—¨ã€‚ å¯ä»¥è¯´ï¼Œç¡¬é“¾æ¥å°±æ˜¯æ–‡ä»¶æœ¬èº«ã€‚
3. ç¬¦å·é“¾æ¥ = ä¸€å¼ å†™ç€â€œæˆ¿å­åœ°å€â€çš„çº¸æ¡ã€‚è¿™å¼ çº¸æ¡æœ¬èº«ä¸æ˜¯æˆ¿å­ï¼Œå®ƒéå¸¸è½»ä¾¿ï¼Œå®¹æ˜“åˆ›å»ºã€‚ä½ æ‹¿ç€è¿™å¼ çº¸æ¡ï¼Œå¯ä»¥æ‰¾åˆ°çœŸæ­£çš„æˆ¿å­ã€‚å¦‚æœæˆ¿å­è¢«æ‹†äº†ï¼ˆåŸå§‹æ–‡ä»¶è¢«åˆ ï¼‰ï¼Œä½ è¿™å¼ çº¸æ¡å°±æˆäº†ä¸€å¼ åºŸçº¸ï¼ˆé“¾æ¥æ–­è£‚ï¼‰ã€‚å¦‚æœæˆ¿å­æ¬å®¶äº†ï¼ˆæ–‡ä»¶è¢«ç§»åŠ¨ï¼‰ï¼Œè€Œçº¸æ¡ä¸Šçš„åœ°å€æ²¡æ›´æ–°ï¼Œä½ åŒæ ·ä¼šæ‰¾ä¸åˆ°å®ƒã€‚

#### ğŸ§  **PNPM å¦‚ä½•å·¥ä½œ**
PNPM çš„é«˜æ•ˆå’ŒèŠ‚çœç©ºé—´ï¼Œä¸»è¦å¾—ç›Šäºå…¶**ç¡¬é“¾æ¥ï¼ˆHard Linksï¼‰** ä¸**ç¬¦å·é“¾æ¥ï¼ˆSymbolic Linksï¼‰** çš„ç»“åˆï¼Œä»¥åŠ**å…¨å±€å­˜å‚¨ï¼ˆGlobal Storeï¼‰** æœºåˆ¶ã€‚

1. **å…¨å±€å­˜å‚¨ï¼ˆStoreï¼‰**ï¼šå½“ä½ å®‰è£…ä¸€ä¸ªä¾èµ–åŒ…æ—¶ï¼ŒPNPM ä¼šé¦–å…ˆå°†å…¶å†…å®¹ä¸‹è½½å¹¶å­˜å‚¨åœ¨æœ¬åœ°ä¸€ä¸ªå…¨å±€çš„ã€å†…å®¹å¯å¯»å€çš„å­˜å‚¨ä¸­å¿ƒï¼ˆé€šå¸¸åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ `.pnpm-store` æ–‡ä»¶å¤¹ä¸­ï¼‰ã€‚åŒä¸€ä¸ªç‰ˆæœ¬çš„åŒ…åœ¨ç£ç›˜ä¸Šåªå­˜å‚¨ä¸€æ¬¡ã€‚
2. **ç¡¬é“¾æ¥ï¼ˆHard Linksï¼‰**ï¼šåœ¨ä¸ºä¸€ä¸ªæ–°é¡¹ç›®å®‰è£…ç›¸åŒçš„ä¾èµ–åŒ…æ—¶ï¼ŒPNPM ç›´æ¥ä»å…¨å±€å­˜å‚¨åˆ›å»ºç¡¬é“¾æ¥åˆ°é¡¹ç›®çš„ `node_modules/.pnpm`ã€‚ç¡¬é“¾æ¥å‡ ä¹ä¸å ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ï¼Œå› ä¸ºå®ƒåªæ˜¯å¢åŠ äº†ä¸€ä¸ªæŒ‡å‘åŸå§‹æ•°æ®å—çš„è®°å½•ï¼›ä¸åŒé¡¹ç›®è®¿é—®çš„å®é™…ä¸Šæ˜¯ç£ç›˜ä¸Šçš„åŒä¸€ä»½ç‰©ç†æ•°æ®ã€‚
3. **ç¬¦å·é“¾æ¥ï¼ˆSymbolic Linksï¼‰ä¸ä¾èµ–ç»“æ„**ï¼šPNPM ä¼šç»´æŠ¤ä¸€ä¸ªéå¹³é“ºçš„ã€æ›´ç¬¦åˆä¾èµ–çœŸå®å…³ç³»çš„ `node_modules` ç›®å½•ç»“æ„ã€‚æ¯ä¸ªåŒ…çš„ä¾èµ–é¡¹ä¼šè¢«ç¬¦å·é“¾æ¥åˆ°å…¶å¯¹åº”çš„ä½ç½®ï¼ˆé€šå¸¸æ˜¯ `.pnpm` æ–‡ä»¶å¤¹å†…ï¼‰

æ¥çœ‹ä¸€ä¸ªä¾‹å­è¿›ä¸€æ­¥ç†è§£ PNPM é¡¹ç›®çš„ node_modules æ–‡ä»¶ç»“æ„ï¼š

```json
node_modules/
â”œâ”€â”€ .pnpm/            -> å­˜å‚¨ç€ä½ é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–ï¼ˆç›´æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–ï¼‰ï¼Œé€šè¿‡ç¡¬é“¾æ¥æŒ‡å‘å…¨å±€å‚¨å­˜
â”‚   â”œâ”€â”€ lodash@4.17.21/
â”‚   â”‚   â””â”€â”€ node_modules/
â”‚   â”‚       â””â”€â”€ lodash/       -> å…¨å±€ Store çš„ç¡¬é“¾æ¥
â”‚   â”œâ”€â”€ @vue+reactivity@3.3.4/
â”‚   â”‚   â””â”€â”€ node_modules/
â”‚   â”‚       â”œâ”€â”€ @vue/reactivity/ -> å…¨å±€ Store çš„ç¡¬é“¾æ¥
â”‚   â”‚       â””â”€â”€ ...ï¼ˆå®ƒçš„ä¾èµ–ï¼‰
â”‚   â””â”€â”€ ...ï¼ˆå…¶ä»–æ‰€æœ‰é—´æ¥ä¾èµ–ï¼‰
â”‚
â”œâ”€â”€ lodash -> ./.pnpm/lodash@4.17.21/node_modules/lodash		 -> ç¬¦å·é“¾æ¥
â””â”€â”€ @vue/ -> ./.pnpm/@vue+reactivity@3.3.4/node_modules/@vue			-> ç¬¦å·é“¾æ¥
```

å‡è®¾ä½ çš„ä»£ç æ‰§è¡Œ `import { ref } from '@vue/reactivity'`ï¼š

1. Node.js åœ¨ node_modules/ ç›®å½•ä¸‹å¯»æ‰¾ @vue æ–‡ä»¶å¤¹ã€‚
2. å®ƒæ‰¾åˆ° node_modules/@vue/ï¼ˆè¿™æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼‰ï¼Œå¹¶è·Ÿéšå®ƒæŒ‡å‘çš„å®é™…è·¯å¾„ã€‚
3. è¿™ä¸ªé“¾æ¥æŒ‡å‘çš„æ˜¯ ./.pnpm/@vue+reactivity@3.3.4/node_modules/@vue/reactivityï¼ˆå‡è®¾ç‰ˆæœ¬æ˜¯3.3.4ï¼‰ã€‚
4. æœ€ç»ˆï¼Œå®ƒåœ¨è¿™ä¸ªä½ç½®æ‰¾åˆ°äº†åŒ…çš„å®ä½“æ–‡ä»¶ï¼ˆè¿™äº›æ–‡ä»¶æ˜¯ç¡¬é“¾æ¥åˆ°å…¨å±€ Store çš„ï¼‰ã€‚
5. æ¨¡å—è¢«æˆåŠŸåŠ è½½ã€‚

#### ğŸ”§ **PNPM çš„å…¶å®ƒå®ç”¨ç‰¹æ€§**
é™¤äº†æ ¸å¿ƒä¼˜åŠ¿ï¼ŒPNPM è¿˜æä¾›äº†ä¸€äº›æå‡å¼€å‘ä½“éªŒçš„åŠŸèƒ½ï¼š

+ **é«˜æ•ˆçš„å·¥ä½œåŒºï¼ˆWorkspaceï¼‰**ï¼šç”¨äºç®¡ç† Monorepoï¼ˆå•ä»“åº“å¤šåŒ…ï¼‰ï¼Œèƒ½è½»æ¾å¤„ç†å¤šä¸ªç›¸å…³åŒ…ä¹‹é—´çš„ä¾èµ–å’Œé“¾æ¥ã€‚
+ **ä¸¥æ ¼çš„ä¾èµ–ç‰ˆæœ¬æ§åˆ¶**ï¼šé€šè¿‡ `pnpm-lock.yaml` æ–‡ä»¶ç¡®ä¿ä¾èµ–å®‰è£…çš„ä¸€è‡´æ€§ã€‚
+ **ç¦»çº¿æ¨¡å¼**ï¼šæ”¯æŒç¦»çº¿å®‰è£…ï¼Œä¼˜å…ˆä½¿ç”¨ç¼“å­˜ã€‚

### NPM å‘åŒ…
1. è®¾ç½®æ­£ç¡®çš„`package.json`ï¼Œå¦‚ï¼š

```json
{
  "name": "@hasonocell/addon", // @<user-name>/<package-name>ä½¿å¾—åŒ…åæºå¸¦ä¸Š scopeï¼Œé¿å…é‡å
  "version": "1.0.0",
  "main": "lib/index.js",
  "types": "lib/index.d.ts",
  "scripts": {
    "build": "tsc",
    "format": "prettier --write \"src/**/*.ts\" \"src/**/*.js\"",
    "lint": "tslint -p tsconfig.json"
  },
  "keywords": [],
  "author": "HasonoCell",
  "license": "ISC",
  "description": "Message Tool Based On postMessage API",
  "devDependencies": {
    "@types/uuid": "^10.0.0",
    "prettier": "^3.5.3",
    "tslint": "^5.20.1",
    "tslint-config-prettier": "^1.18.0",
    "typescript": "^5.8.2"
  },
  "dependencies": {
    "mitt": "^3.0.1",
    "uuid": "^8.3.0"
  },
  "publishConfig": {
    "access": "public",
    "registry": "https://registry.npmjs.org/"
  }
}
```

2. æ‰§è¡Œ`npm login`ï¼Œç™»å½•ä½ çš„è´¦å·
3. æ‰§è¡Œ`npm publish --access public`ï¼Œå°†åŒ…å‘å¸ƒä¸ºå…¬å…±åŒ…

