# RN 工作流程的简单概况
开发阶段：开发者手动编写 JSX 和 JS 代码。

****

**构建阶段**（在开发电脑上发生）：

+ **JS 打包 (by Metro)**:
    - Metro 打包工具启动，使用 Babel 将 JSX 转译为纯 JS。
    - 接着，Metro 调用 **Hermes 编译器**（一个专为 RN 打造的开源 JS 引擎），将 JS 代码编译为高度优化的字节码 (`.hbc` 文件)。
+ **原生打包 (by Gradle/Xcode)**:
    - 原生构建工具（如 Android 的 Gradle）会下载并集成预编译好的 **Hermes 引擎**（一个原生库）。
    - Gradle 编译所有的原生代码 (Java/Kotlin，原生代码几乎不用手动编写，由 RN 核心包提供)，然后将 **Hermes 引擎**、Metro 生成的**字节码**以及所有资源（图片、字体等）打包在一起，生成最终的安装文件 (`.apk`)。通过这个安装文件可以将我们在电脑上开发的应用安装到用户手机当中。

****

**运行阶段**（在用户手机上发生）：

+ 用户下载并点击 App ，启动应用，操作系统加载应用。**Hermes 引擎**被激活，加载并执行打包后的字节码。
+ JS 线程开始运行，通过 JSI 向原生 UI 线程发送指令（例如“创建一个视图”、“显示这段文本”）。
+ 原生 UI 线程接收到指令，**开始调用原生 API，将界面真正地渲染到手机屏幕上**。

