### 核心概念：定位上下文（Containing Block）
在深入每个值之前，必须理解“包含块”的概念。元素最终的位置是相对于它的**包含块**来确定的。不同类型的 `position` 值会为元素建立新的包含块或使用现有的包含块。理解这一点是掌握 `position` 的关键。

---

### `position` 的五个值
#### 1. `static` （静态定位）
+ **定义**：这是所有元素的**默认值**。元素遵循正常的文档流（Normal Flow）。`top`, `right`, `bottom`, `left` 和 `z-index` 属性**对此定位方式无效**，会被浏览器忽略。
+ **包含块**：通常是其最近的块级祖先元素的内容区。
+ **使用场景**：
    - 当你想要**重置**一个被设置了其他定位方式的元素，让其回归正常文档流时。
    - 绝大多数不需要特殊定位的普通元素都默认使用此值。
+ **示例**：

```html
<div class="box static-box">我是一个普通的静态定位盒子。</div>
```

```css
.static-box {
  position: static; /* 这行其实可以省略 */
  top: 100px; /* 这个属性无效 */
}
```

#### 2. `relative` （相对定位）
+ **定义**：元素**先放置在正常的文档流中**（位置与 `static` 时相同），然后可以相对于其原本的位置进行偏移。**它原本在文档流中所占的空间会保留**，不会被其他元素填充。
+ **包含块**：其原本在正常文档流中的位置。
+ **使用场景**：
    - **微调元素位置**：例如，让一个图标相对于其文本基线稍微上移。
    - **作为 **`absolute`** 定位元素的“锚点”**：这是一个极其重要的用途。当你希望一个 `absolute` 定位的子元素相对于当前这个元素（而不是整个视口或更远的祖先）进行定位时，需要给这个父元素设置 `position: relative`（且不设置偏移量）。这样它就为绝对定位的子元素建立了包含块。
+ **示例**：

```html
<div class="box relative-box">我相对自己原本的位置向下向右移动了50px。</div>

```

```css
.relative-box {
  position: relative;
  top: 50px;  /* 相对于其原位置顶部向下移动50px */
  left: 50px; /* 相对于其原位置左侧向右移动50px */
}
```

#### 3. `absolute` （绝对定位）
+ **定义**：元素**脱离正常的文档流**。它原本占用的空间会被后续元素“回收”，仿佛这个元素不存在一样。元素的位置由 `top`, `right`, `bottom`, `left` 的值确定。
+ **包含块**：其位置是相对于**最近的非 **`static`**（即 **`relative`**, **`absolute`**, **`fixed`** 或 **`sticky`**）定位的祖先元素**。如果没有任何祖先元素是非 `static` 定位，那么它的包含块就是**初始包含块**（通常是 `<html>` 元素，即整个页面）。
+ **使用场景**：
    - **创建不干扰其他元素的UI组件**：如模态框（Modal）、下拉菜单（Dropdown）、工具提示（Tooltip）。这些组件需要精确地放在特定位置，且不能影响页面其他部分的布局。
    - **图标上的角标（Badge）**：将一个表示数量的红色小圆点绝对定位到图标的右上角。
+ **示例**：

```html
<div class="parent"> <!-- 这个div需要设置relative -->
  <div class="box absolute-box">我相对于有定位的父元素定位。</div>
</div>

```

```css
.parent {
  position: relative; /* 为绝对定位的子元素建立包含块 */
  height: 200px;
  border: 1px solid blue;
}
.absolute-box {
  position: absolute;
  bottom: 10px; /* 贴在父元素底部上方10px处 */
  right: 10px;  /* 贴在父元素右侧左边10px处 */
}
```

#### 4. `fixed` （固定定位）
+ **定义**：与 `absolute` 类似，元素**脱离文档流**。但它的包含块是**视口（Viewport）**，即浏览器窗口。因此，它的位置不会随着页面滚动而移动，会始终固定在屏幕的同一个位置。
+ **包含块**：视口（Viewport）。
+ **使用场景**：
    - **固定导航栏**：始终停留在页面顶部的导航菜单。
    - **“回到顶部”按钮**：始终停留在页面右下角的按钮。
    - **悬浮的客服聊天窗口**：始终停留在屏幕角落的客服图标。
+ **示例**：

```html
<div class="box fixed-box">我会一直固定在屏幕右下角，即使页面滚动。</div>

```

```css
.fixed-box {
  position: fixed;
  bottom: 20px;
  right: 20px;
}
```

#### 5. `sticky` （粘性定位）
+ **定义**：可以看作是 `relative` 和 `fixed` 的混合。元素**先正常存在于文档流中**（表现为 `relative`），直到它滚动到某个阈值（由 `top`, `right`, `bottom`, 或 `left` 定义）。当它触及这个阈值时，它就会“固定”在那个位置，**表现得像 **`fixed`，直到其父元素的边界将它“推走”。
+ **包含块**：是其最近的滚动祖先（祖先元素的 `overflow` 属性是 `hidden`, `scroll`, `auto`, 或 `overlay`）和块级祖先。`top` 等值相对于这个滚动祖先的视口。
+ **使用场景**：
    - **表格的表头**：在滚动表格时，表头会一直固定在视口顶部，直到整个表格滚动完毕。
    - **分类导航标题**：在长的分类列表中，当前的分类标题可以粘在页面顶部，直到下一个分类标题将它推走。
+ **示例**：

```html
<dl>
  <dt>A</dt> <!-- 这是一个sticky元素 -->
  <dd>Andrew</dd>
  <dd>Alice</dd>
  ...很多以A开头的词条...
  <dt>B</dt> <!-- 当B滚动到顶部时，A会被推走 -->
  <dd>Bob</dd>
  <dd>Betty</dd>
  ...很多以B开头的词条...
</dl>

```

```css
dt {
  position: sticky;
  top: 0; /* 当dt元素距离视口顶部为0时，触发固定效果 */
  background-color: white;
}
```

### 总结与对比
| 值 | 是否脱离文档流？ | 定位基准（包含块） | 常见使用场景 |
| :--- | :--- | :--- | :--- |
| `static` | 否 | 正常流中的祖先元素 | 默认布局，重置定位 |
| `relative` | 否（保留原空间） | **自身原本的位置** | 微调元素，作为 `absolute` 的锚点 |
| `absolute` | 是 | **最近的非 **`static`** 祖先** | 模态框、下拉菜单、工具提示（相对于特定父元素） |
| `fixed` | 是 | **视口（Viewport）** | 固定导航栏、悬浮按钮（相对于浏览器窗口） |
| `sticky` | 否（直到触发阈值） | **最近的滚动祖先** + `top` 等值定义的阈值 | 滚动粘性表头、分类导航标题 |


